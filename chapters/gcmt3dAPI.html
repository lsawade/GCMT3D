

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GCMT3D API &mdash; gcmt3d 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="EnTK Workflow API" href="workflowAPI.html" />
    <link rel="prev" title="Installation of hdf5 and h5py" href="hdf5_and_h5py.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> gcmt3d
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="specfem_setup_and_compilation.html">Specfem Setup and compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_the_database.html">Create a Database Entry</a></li>
<li class="toctree-l1"><a class="reference internal" href="request_data.html">Request Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="perturb_sources.html">Perturbation of Specfem Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_specfem.html">Creating Synthetics</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_specfem.html#cleaning-the-simulation-directories">Cleaning the simulation directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversion.html">Conversion of the Synthetic and Observed Data to ASDF</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing.html">Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="windowing.html">Windowing of the observed and synthetic traces</a></li>
<li class="toctree-l1"><a class="reference internal" href="hdf5_and_h5py.html">Installation of hdf5 and h5py</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GCMT3D API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#asdf-pypaw">ASDF (pypaw)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.asdf.convert">Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.asdf.procbase">Processing Abstract Base Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.asdf.process">Seismic Trace Processing Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.asdf.stations">Stations Info Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.asdf.utils">General ASDF utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.asdf.window">ASDF Windowing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data">Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#download">Download</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-gcmt3d.data.download.requestBuilder">Request seismic data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#management">Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-gcmt3d.data.management.skeleton">Create database entry/database skeleton</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-gcmt3d.data.management.specfem_sources">Edit Specfem sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-gcmt3d.data.management.create_process_paths">Create Path files to process asdf files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-gcmt3d.data.management.inversion_dicts">Create inversion dictionaries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-gcmt3d.runSF3D.runSF3D">Run Specfem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#signal-processing">Signal Processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.signal.compare_trace">Compare traces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.signal.process">Function to process streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.signal.rotate">Rotate seismograms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-gcmt3d.utils.download">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windowing-of-traces">Windowing of traces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.window.window">Windowing of the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.window.window_weights">Weighting the windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gcmt3d.window.filter_windows">Filtering the windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-gcmt3d.source">Source <code class="docutils literal notranslate"><span class="pre">class</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workflowAPI.html">EnTK Workflow API</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflowAPI.html#workflow-components">Workflow components</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gcmt3d</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>GCMT3D API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/chapters/gcmt3dAPI.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gcmt3d-api">
<h1>GCMT3D API<a class="headerlink" href="#gcmt3d-api" title="Permalink to this headline">¶</a></h1>
<p>This contains the function set that is included in GCMT3D. Some of the
modules originate in other packages such as <code class="docutils literal notranslate"><span class="pre">pytomo3d</span></code> and <code class="docutils literal notranslate"><span class="pre">pypaw</span></code>.
Those  modules have been updated and integrated into GCMT3D.</p>
<div class="section" id="asdf-pypaw">
<h2>ASDF (pypaw)<a class="headerlink" href="#asdf-pypaw" title="Permalink to this headline">¶</a></h2>
<p>The functions in this section originally belonged to pypaw which partly
relied on pytomo. To make this package as simple as possible I extracted the
only functions necessary for the source inversion.</p>
<div class="section" id="module-gcmt3d.asdf.convert">
<span id="conversion"></span><h3>Conversion<a class="headerlink" href="#module-gcmt3d.asdf.convert" title="Permalink to this headline">¶</a></h3>
<p>Conversion utilities for different seismic datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py class">
<dt id="gcmt3d.asdf.convert.ConvertASDF">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.asdf.convert.</code><code class="sig-name descname">ConvertASDF</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">status_bar</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/convert.html#ConvertASDF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.convert.ConvertASDF" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="gcmt3d.asdf.convert.ConvertASDF.clean_output">
<em class="property">static </em><code class="sig-name descname">clean_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output_fn</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/convert.html#ConvertASDF.clean_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.convert.ConvertASDF.clean_output" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="gcmt3d.asdf.convert.ConvertASDF.print_info">
<em class="property">static </em><code class="sig-name descname">print_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">waveform_files</span></em>, <em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">staxml_files</span></em>, <em class="sig-param"><span class="n">quakemlfile</span></em>, <em class="sig-param"><span class="n">output_fn</span></em>, <em class="sig-param"><span class="n">create_simple_inv</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/convert.html#ConvertASDF.print_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.convert.ConvertASDF.print_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="gcmt3d.asdf.convert.ConvertASDF.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/convert.html#ConvertASDF.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.convert.ConvertASDF.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.convert.add_stationxml_to_asdf">
<code class="sig-prename descclassname">gcmt3d.asdf.convert.</code><code class="sig-name descname">add_stationxml_to_asdf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ds</span></em>, <em class="sig-param"><span class="n">staxml_filelist</span></em>, <em class="sig-param"><span class="n">event</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">create_simple_inv</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">sta_dict</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">status_bar</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/convert.html#add_stationxml_to_asdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.convert.add_stationxml_to_asdf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.convert.add_waveform_to_asdf">
<code class="sig-prename descclassname">gcmt3d.asdf.convert.</code><code class="sig-name descname">add_waveform_to_asdf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ds</span></em>, <em class="sig-param"><span class="n">waveform_filelist</span></em>, <em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">event</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">create_simple_inv</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">status_bar</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/convert.html#add_waveform_to_asdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.convert.add_waveform_to_asdf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.convert.write_stream_to_sac">
<code class="sig-prename descclassname">gcmt3d.asdf.convert.</code><code class="sig-name descname">write_stream_to_sac</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream</span></em>, <em class="sig-param"><span class="n">outputdir</span></em>, <em class="sig-param"><span class="n">tag</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/convert.html#write_stream_to_sac"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.convert.write_stream_to_sac" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-gcmt3d.asdf.procbase">
<span id="processing-abstract-base-class"></span><h3>Processing Abstract Base Class<a class="headerlink" href="#module-gcmt3d.asdf.procbase" title="Permalink to this headline">¶</a></h3>
<p>Parent class for general asdf processing. Wraps things like MPI
and parallel I/O so they are invisible to users.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016
Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>) 2019</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
</div>
<div class="section" id="module-gcmt3d.asdf.process">
<span id="seismic-trace-processing-class"></span><h3>Seismic Trace Processing Class<a class="headerlink" href="#module-gcmt3d.asdf.process" title="Permalink to this headline">¶</a></h3>
<p>Parent class for signal processing asdf file and
handles parallel I/O so they are invisible to users.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py class">
<dt id="gcmt3d.asdf.process.ProcASDF">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.asdf.process.</code><code class="sig-name descname">ProcASDF</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">param</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">debug</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/process.html#ProcASDF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.process.ProcASDF" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">gcmt3d.asdf.procbase.ProcASDFBase</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.process.check_param_keywords">
<code class="sig-prename descclassname">gcmt3d.asdf.process.</code><code class="sig-name descname">check_param_keywords</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">param</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/process.html#check_param_keywords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.process.check_param_keywords" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the param keywords are the same with the keywords list of
the function of process_stream</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.process.process_wrapper">
<code class="sig-prename descclassname">gcmt3d.asdf.process.</code><code class="sig-name descname">process_wrapper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream</span></em>, <em class="sig-param"><span class="n">inv</span></em>, <em class="sig-param"><span class="n">param</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/process.html#process_wrapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.process.process_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Process function wrapper for pyasdf</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – </p></li>
<li><p><strong>inv</strong> – </p></li>
<li><p><strong>param</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.process.update_param">
<code class="sig-prename descclassname">gcmt3d.asdf.process.</code><code class="sig-name descname">update_param</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">param</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/process.html#update_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.process.update_param" title="Permalink to this definition">¶</a></dt>
<dd><p>update the param based on event information</p>
</dd></dl>

</div>
<div class="section" id="module-gcmt3d.asdf.stations">
<span id="stations-info-utilities"></span><h3>Stations Info Utilities<a class="headerlink" href="#module-gcmt3d.asdf.stations" title="Permalink to this headline">¶</a></h3>
<p>Scripts that contains methods that deals with station information in the
asdf file.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU General Public License, Version 3
(<a class="reference external" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.asdf.stations.extract_adjoint_stations">
<code class="sig-prename descclassname">gcmt3d.asdf.stations.</code><code class="sig-name descname">extract_adjoint_stations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">asdf</span></em>, <em class="sig-param"><span class="n">stations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/stations.html#extract_adjoint_stations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.stations.extract_adjoint_stations" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract station information from adjoint source group</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.stations.extract_station_info_from_asdf">
<code class="sig-prename descclassname">gcmt3d.asdf.stations.</code><code class="sig-name descname">extract_station_info_from_asdf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">asdf</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/stations.html#extract_station_info_from_asdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.stations.extract_station_info_from_asdf" title="Permalink to this definition">¶</a></dt>
<dd><p>extract the sensor type from stationxml in asdf file</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.stations.extract_waveform_stations">
<code class="sig-prename descclassname">gcmt3d.asdf.stations.</code><code class="sig-name descname">extract_waveform_stations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">asdf</span></em>, <em class="sig-param"><span class="n">stations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/stations.html#extract_waveform_stations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.stations.extract_waveform_stations" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract station information from wavefrom group</p>
</dd></dl>

</div>
<div class="section" id="module-gcmt3d.asdf.utils">
<span id="general-asdf-utilities"></span><h3>General ASDF utilities<a class="headerlink" href="#module-gcmt3d.asdf.utils" title="Permalink to this headline">¶</a></h3>
<p>Parent class for singal processing asdf file and
handles parallel I/O so they are invisible to users.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016
Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>) 2019</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py class">
<dt id="gcmt3d.asdf.utils.JSONObject">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">JSONObject</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#JSONObject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.JSONObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.drawProgressBar">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">drawProgressBar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">percent</span></em>, <em class="sig-param"><span class="n">user_text</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">barLen</span><span class="o">=</span><span class="default_value">20</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#drawProgressBar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.drawProgressBar" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw status progress bars in terminal.
Not recommendded used for job scripts(will create
thousands of lines of output)</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.dump_json">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">dump_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">content</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#dump_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.dump_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.dump_yaml">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">dump_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">content</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#dump_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.dump_yaml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.is_mpi_env">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">is_mpi_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#is_mpi_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.is_mpi_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if current environment is MPI or not</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.isclose">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">isclose</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">rel_tol</span><span class="o">=</span><span class="default_value">1e-09</span></em>, <em class="sig-param"><span class="n">abs_tol</span><span class="o">=</span><span class="default_value">0.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#isclose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.isclose" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare two numbers see if they are close to each other to a
tolerance level</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.load_json">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">load_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#load_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.load_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.load_yaml">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">load_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#load_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.load_yaml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.read_json_file">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">read_json_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parfile</span></em>, <em class="sig-param"><span class="n">obj_hook</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#read_json_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.read_json_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook json to an JSONObject instance</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.read_yaml_file">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">read_yaml_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#read_yaml_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.read_yaml_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.reset_matplotlib">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">reset_matplotlib</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#reset_matplotlib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.reset_matplotlib" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.smart_check_path">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">smart_check_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">mpi_mode</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#smart_check_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.smart_check_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.smart_mkdir">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">smart_mkdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dirname</span></em>, <em class="sig-param"><span class="n">mpi_mode</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#smart_mkdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.smart_mkdir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.smart_read_json">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">smart_read_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_file</span></em>, <em class="sig-param"><span class="n">mpi_mode</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">object_hook</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#smart_read_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.smart_read_json" title="Permalink to this definition">¶</a></dt>
<dd><p>read json file under mpi and multi-processing environment.
Hook it to an JSONObject(not the conventional way to
read it as object)</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.smart_read_yaml">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">smart_read_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">yaml_file</span></em>, <em class="sig-param"><span class="n">mpi_mode</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#smart_read_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.smart_read_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Read yaml file into python dict, in mpi_mode or not</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.smart_remove_file">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">smart_remove_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">mpi_mode</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#smart_remove_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.smart_remove_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.timing">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">timing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#timing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.timing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.utils.write_yaml_file">
<code class="sig-prename descclassname">gcmt3d.asdf.utils.</code><code class="sig-name descname">write_yaml_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/utils.html#write_yaml_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.utils.write_yaml_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes dictionary to given yaml file.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>d: Dictionary to be written into the yaml file
filename: string with filename of the file to be written.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-gcmt3d.asdf.window">
<span id="asdf-windowing"></span><h3>ASDF Windowing<a class="headerlink" href="#module-gcmt3d.asdf.window" title="Permalink to this headline">¶</a></h3>
<p>Class for window selection on asdf file and handles parallel I/O
so they are invisible to users.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py class">
<dt id="gcmt3d.asdf.window.WindowASDF">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.asdf.window.</code><code class="sig-name descname">WindowASDF</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">param</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">debug</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/window.html#WindowASDF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.window.WindowASDF" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">gcmt3d.asdf.procbase.ProcASDFBase</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.window.check_param_keywords">
<code class="sig-prename descclassname">gcmt3d.asdf.window.</code><code class="sig-name descname">check_param_keywords</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/window.html#check_param_keywords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.window.check_param_keywords" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.window.load_window_config">
<code class="sig-prename descclassname">gcmt3d.asdf.window.</code><code class="sig-name descname">load_window_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">param</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/window.html#load_window_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.window.load_window_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.window.window_wrapper">
<code class="sig-prename descclassname">gcmt3d.asdf.window.</code><code class="sig-name descname">window_wrapper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsd_station_group</span></em>, <em class="sig-param"><span class="n">synt_station_group</span></em>, <em class="sig-param"><span class="n">config_dict</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">obsd_tag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">synt_tag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">user_modules</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">event</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">figure_mode</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">figure_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">_verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/window.html#window_wrapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.window.window_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for asdf I/O</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.asdf.window.write_window_json">
<code class="sig-prename descclassname">gcmt3d.asdf.window.</code><code class="sig-name descname">write_window_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">results</span></em>, <em class="sig-param"><span class="n">output_file</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/asdf/window.html#write_window_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.asdf.window.write_window_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="download">
<h3>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h3>
<div class="section" id="module-gcmt3d.data.download.requestBuilder">
<span id="request-seismic-data"></span><h4>Request seismic data<a class="headerlink" href="#module-gcmt3d.data.download.requestBuilder" title="Permalink to this headline">¶</a></h4>
<p>This Function contains functions to build an FDSN time series download
request from an input CMT source object and List of stations.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>)</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU General Public License, Version 3
(<a class="reference external" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>)</p>
</dd>
</dl>
<dl class="py class">
<dt id="gcmt3d.data.download.requestBuilder.DataRequest">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.data.download.requestBuilder.</code><code class="sig-name descname">DataRequest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stationlist</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">['BHZ']</span></em>, <em class="sig-param"><span class="n">locations</span><span class="o">=</span><span class="default_value">['00']</span></em>, <em class="sig-param"><span class="n">duration</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">starttime_offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">outputdir</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/download/requestBuilder.html#DataRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.download.requestBuilder.DataRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that handles the building of a data request</p>
<dl class="py method">
<dt id="gcmt3d.data.download.requestBuilder.DataRequest.download">
<code class="sig-name descname">download</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">selection_file</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">download_log_file</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/download/requestBuilder.html#DataRequest.download"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.download.requestBuilder.DataRequest.download" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes self.request and starts the download of the time series data</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.download.requestBuilder.DataRequest.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmtfname</span></em>, <em class="sig-param"><span class="n">stationlistfname</span><span class="o">=</span><span class="default_value">'/Users/lucassawade/anaconda3/envs/obspy/lib/python3.7/site-packages/gcmt3d/data/download/resources/stations.txt'</span></em>, <em class="sig-param"><span class="n">sfstationlist</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">duration</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">['BHZ']</span></em>, <em class="sig-param"><span class="n">locations</span><span class="o">=</span><span class="default_value">['00']</span></em>, <em class="sig-param"><span class="n">starttime_offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">outputdir</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/download/requestBuilder.html#DataRequest.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.download.requestBuilder.DataRequest.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a downloader class from an input file
This downloader class also needs to contain the output directory for
the traces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmtfname</strong> – filename of input CMTSOLUTION</p></li>
<li><p><strong>stationlistfname</strong> – <p>Give list of stations. Fileformat either</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NETWORK</span> <span class="n">STATION</span> <span class="n">LAT</span>             <span class="n">LON</span>             <span class="n">ELEVATION</span>
<span class="n">IU</span>          <span class="n">ADK</span>     <span class="o">+</span><span class="mf">51.882300</span>  <span class="o">-</span><span class="mf">176.684200</span>     <span class="mf">130.0</span>
</pre></div>
</div>
<p>or in specfem format. Default is None, in which
case a specfem STATIONS list is read.</p>
</p></li>
<li><p><strong>sfstationlist</strong> – <cite>boolean</cite>, if <cite>True</cite> list is in specfem format.
Default <cite>False</cite></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.download.requestBuilder.DataRequest.request">
<code class="sig-name descname">request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/download/requestBuilder.html#DataRequest.request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.download.requestBuilder.DataRequest.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a request file to the earthquake directory. This request file is
then used by the download function to download.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns str</dt>
<dd class="field-odd"><p>Path to requestfile</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.download.requestBuilder.DataRequest.specfem_list">
<code class="sig-name descname">specfem_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">specfemfiledir</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/download/requestBuilder.html#DataRequest.specfem_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.download.requestBuilder.DataRequest.specfem_list" title="Permalink to this definition">¶</a></dt>
<dd><p>This method takes the station list and its content to create a
Specfem Station recording location script list.</p>
<p>The text file should have following format but not contain a header</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">Station</span> <span class="n">Network</span> <span class="n">Latitude</span> <span class="n">Longitude</span> <span class="n">Elevation</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="n">Burial</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">|</span>
<span class="o">-------------------------------------------------------------</span>
</pre></div>
</div>
<p>That is the a sample line would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HRV</span>   <span class="n">IU</span>   <span class="mf">42.5064</span>  <span class="o">-</span><span class="mf">71.5583</span>  <span class="mf">200.0</span>  <span class="mf">0.0</span>
<span class="p">:</span>     <span class="p">:</span>       <span class="p">:</span>         <span class="p">:</span>       <span class="p">:</span>     <span class="p">:</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>specfemfiledir</strong> – directory where to save the STATIONS file for
specfem3d_globe</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="gcmt3d.data.download.requestBuilder.Error">
<em class="property">exception </em><code class="sig-prename descclassname">gcmt3d.data.download.requestBuilder.</code><code class="sig-name descname">Error</code><a class="reference internal" href="../_modules/gcmt3d/data/download/requestBuilder.html#Error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.download.requestBuilder.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Base class for exceptions in this module.</p>
</dd></dl>

<dl class="py exception">
<dt id="gcmt3d.data.download.requestBuilder.InputError">
<em class="property">exception </em><code class="sig-prename descclassname">gcmt3d.data.download.requestBuilder.</code><code class="sig-name descname">InputError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expression</span></em>, <em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/download/requestBuilder.html#InputError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.download.requestBuilder.InputError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gcmt3d.data.download.requestBuilder.Error" title="gcmt3d.data.download.requestBuilder.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">gcmt3d.data.download.requestBuilder.Error</span></code></a></p>
<p>Exception raised for errors in the input.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>expression – input expression in which the error occurred
message – explanation of the error</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="management">
<h3>Management<a class="headerlink" href="#management" title="Permalink to this headline">¶</a></h3>
<div class="section" id="module-gcmt3d.data.management.skeleton">
<span id="create-database-entry-database-skeleton"></span><h4>Create database entry/database skeleton<a class="headerlink" href="#module-gcmt3d.data.management.skeleton" title="Permalink to this headline">¶</a></h4>
<p>This script contains functions to create the skeleton structure for the GCMT3D
database of Earthquakes. If wanted.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>)</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU General Public License, Version 3
(<a class="reference external" href="http://www.gnu.orcopyleft/gpl.html">http://www.gnu.orcopyleft/gpl.html</a>)</p>
</dd>
</dl>
<p>Last Update: June 2019</p>
<dl class="py class">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.data.management.skeleton.</code><code class="sig-name descname">DataBaseSkeleton</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">basedir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cmt_fn</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">specfem_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stations_file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">npar</span><span class="o">=</span><span class="default_value">9</span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to handle data skeleton creation. If specfem directory is given,
the class copies the necessary data from the specfem folder.</p>
<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_1_Cdir">
<code class="sig-name descname">create_1_Cdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmtfile</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_1_Cdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_1_Cdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates 1 Earthquake directory</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_CMT_SIM_dir">
<code class="sig-name descname">create_CMT_SIM_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_CMT_SIM_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_CMT_SIM_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates CMT simulation directory and copies necessary files from given
specfem directory. Important here is the fact that specfem has to be
compiled already and there is no way of testing that prior to running
GCMT.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_Cdirs">
<code class="sig-name descname">create_Cdirs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_Cdirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_Cdirs" title="Permalink to this definition">¶</a></dt>
<dd><p>If more than one earthquake exist with regex, call all of them</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_all">
<code class="sig-name descname">create_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes complete database structure.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_base">
<code class="sig-name descname">create_base</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates Base directory if it doesn’t exist.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_inversion_dir">
<code class="sig-name descname">create_inversion_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_inversion_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_inversion_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates station_data directory for station metadata.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_log_dir">
<code class="sig-name descname">create_log_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_log_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_log_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates station_data directory for station metadata.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_seismogram_dir">
<code class="sig-name descname">create_seismogram_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_seismogram_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_seismogram_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates response subdirectory</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_station_dir">
<code class="sig-name descname">create_station_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_station_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_station_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates station_data directory for station metadata.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.data.management.skeleton.DataBaseSkeleton.create_window_dir">
<code class="sig-name descname">create_window_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/skeleton.html#DataBaseSkeleton.create_window_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.skeleton.DataBaseSkeleton.create_window_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates window_data directory for pyflex window data metadata.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gcmt3d.data.management.specfem_sources">
<span id="edit-specfem-sources"></span><h4>Edit Specfem sources<a class="headerlink" href="#module-gcmt3d.data.management.specfem_sources" title="Permalink to this headline">¶</a></h4>
<p>This script/set of functions is used to create a set of sources for parallel
specfem simulations</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>)</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU General Public License, Version 3
(<a class="reference external" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>)</p>
</dd>
</dl>
<p>Last Update: June 2019</p>
<dl class="py class">
<dt id="gcmt3d.data.management.specfem_sources.SpecfemSources">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.data.management.specfem_sources.</code><code class="sig-name descname">SpecfemSources</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt</span></em>, <em class="sig-param"><span class="n">cmt_dir</span></em>, <em class="sig-param"><span class="n">npar</span></em>, <em class="sig-param"><span class="n">dm</span><span class="o">=</span><span class="default_value">240.0</span></em>, <em class="sig-param"><span class="n">dx</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">ddeg</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">hdur0</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">outdir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/specfem_sources.html#SpecfemSources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.specfem_sources.SpecfemSources" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class handles the writing of specfem sources in form of CMT solutions
and the stations</p>
<dl class="py method">
<dt id="gcmt3d.data.management.specfem_sources.SpecfemSources.write_sources">
<code class="sig-name descname">write_sources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/specfem_sources.html#SpecfemSources.write_sources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.specfem_sources.SpecfemSources.write_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to write the CMT Solutions to CMT files</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.specfem_sources.replace_file">
<code class="sig-prename descclassname">gcmt3d.data.management.specfem_sources.</code><code class="sig-name descname">replace_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">destination</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/specfem_sources.html#replace_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.specfem_sources.replace_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Mini function that replaces a file</p>
</dd></dl>

</div>
<div class="section" id="module-gcmt3d.data.management.create_process_paths">
<span id="create-path-files-to-process-asdf-files"></span><h4>Create Path files to process asdf files<a class="headerlink" href="#module-gcmt3d.data.management.create_process_paths" title="Permalink to this headline">¶</a></h4>
<p>This script contains functions to create path files for the processing of the
observed and synthetic data.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>)</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU General Public License, Version 3
(<a class="reference external" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>)</p>
</dd>
</dl>
<p>Last Update: June 2019</p>
<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.create_process_path_obs">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">create_process_path_obs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt_filename</span></em>, <em class="sig-param"><span class="n">process_dir</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#create_process_path_obs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.create_process_path_obs" title="Permalink to this definition">¶</a></dt>
<dd><p>This function writes a yaml conversion path file for 1 simulation
file. This file is later on need for the creation of ASDF files and the
processing involved ASDF files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmt_filename</strong> – cmt_filename in the database (Important this only
works if the directory structure exists already)</p></li>
<li><p><strong>process_dir</strong> – path to the directory containing all processing files.</p></li>
<li><p><strong>verbose</strong> – boolean on whether process info should be written</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.create_process_path_syn">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">create_process_path_syn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt_filename</span></em>, <em class="sig-param"><span class="n">process_dir</span></em>, <em class="sig-param"><span class="n">npar</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#create_process_path_syn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.create_process_path_syn" title="Permalink to this definition">¶</a></dt>
<dd><p>This function writes a yaml processing path file all simulations
file. This is needed for the processing of the ASDF files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmt_filename</strong> – cmt_filename in the database (Important this only
works if the directory structure exists already)</p></li>
<li><p><strong>process_dir</strong> – path to the directory containing all processing files.</p></li>
<li><p><strong>npar</strong> – number of parameters to invert for</p></li>
<li><p><strong>verbose</strong> – boolean on whether process info should be written</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.create_window_path">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">create_window_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt_filename</span></em>, <em class="sig-param"><span class="n">window_process_dir</span></em>, <em class="sig-param"><span class="n">figure_mode</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#create_window_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.create_window_path" title="Permalink to this definition">¶</a></dt>
<dd><p>This function writes a yaml processing path file all simulations
file. This is needed for the processing of the ASDF files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmt_filename</strong> – cmt_filename in the database (Important this only
works if the directory structure exists already)</p></li>
<li><p><strong>process_dir</strong> – path to the directory containing all processing files.</p></li>
<li><p><strong>npar</strong> – number of parameters to invert for</p></li>
<li><p><strong>verbose</strong> – boolean on whether process info should be written</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.get_processing_list">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">get_processing_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt_file_db</span></em>, <em class="sig-param"><span class="n">process_obs_dir</span></em>, <em class="sig-param"><span class="n">process_syn_dir</span></em>, <em class="sig-param"><span class="n">npar</span><span class="o">=</span><span class="default_value">9</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#get_processing_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.get_processing_list" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns a list of all process path files. It is needed
for the EnTK workflow. This way the processing of each ASDF file can be
assigned to one task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmt_file_db</strong> (<em>str</em>) – the cmtsolution file in the database.</p></li>
<li><p><strong>process_obs_dir</strong> – directory with the process parameter files for
the observed data</p></li>
<li><p><strong>process_syn_dir</strong> (<em>str</em>) – directory with the process parameter files for
the synthetic data</p></li>
<li><p><strong>npar</strong> (<em>int</em>) – Number of parameters to invert for</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – verbose output if true</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple of 3 lists - 1 all processing path files;
2 the observed output files;
3 the synthetic output files</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.get_windowing_list">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">get_windowing_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt_file_db</span></em>, <em class="sig-param"><span class="n">window_process_dir</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#get_windowing_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.get_windowing_list" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns a list of all windowing path files. It is needed
for the EnTK workflow. This way the windowing of each passband ASDF file
can be assigned to one task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmt_file_db</strong> (<em>str</em>) – the cmtsolution file in the database.</p></li>
<li><p><strong>window_process_dir</strong> (<em>str</em>) – path to the process directory</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – if True verbose output</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple of 2 lists - 1 all windowing path files; 2 the output files</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.is_mpi_env">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">is_mpi_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#is_mpi_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.is_mpi_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if current environment is MPI or not</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.read_yaml_file">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">read_yaml_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#read_yaml_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.read_yaml_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.smart_read_yaml">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">smart_read_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">yaml_file</span></em>, <em class="sig-param"><span class="n">mpi_mode</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#smart_read_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.smart_read_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Read yaml file into python dict, in mpi_mode or not</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.create_process_paths.write_yaml_file">
<code class="sig-prename descclassname">gcmt3d.data.management.create_process_paths.</code><code class="sig-name descname">write_yaml_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/create_process_paths.html#write_yaml_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.create_process_paths.write_yaml_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes dictionary to given yaml file.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>d: Dictionary to be written into the yaml file
filename: string with filename of the file to be written.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-gcmt3d.data.management.inversion_dicts">
<span id="create-inversion-dictionaries"></span><h4>Create inversion dictionaries<a class="headerlink" href="#module-gcmt3d.data.management.inversion_dicts" title="Permalink to this headline">¶</a></h4>
<p>This script contains functions to create pycmt3d inversion dictionaries. They
have to have following setup:</p>
<dl class="field-list simple">
<dt class="field-odd">param asdf_file_dict</dt>
<dd class="field-odd"><p>the dictionary which provides the path
information of asdf file, for example:
{“obsd”:”/path/obsd/asdf”, “synt”:”/path/synt/asdf”,
“Mrr”: “/path/Mrr/synt/asdf”, …}</p>
</dd>
<dt class="field-even">copyright</dt>
<dd class="field-even"><p>Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>)</p>
</dd>
<dt class="field-odd">license</dt>
<dd class="field-odd"><p>GNU General Public License, Version 3
(<a class="reference external" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>)</p>
</dd>
</dl>
<p>Last Update: June 2019</p>
<dl class="py function">
<dt id="gcmt3d.data.management.inversion_dicts.create_full_inversion_dict_list">
<code class="sig-prename descclassname">gcmt3d.data.management.inversion_dicts.</code><code class="sig-name descname">create_full_inversion_dict_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt_file_db</span></em>, <em class="sig-param"><span class="n">process_obs_dir</span></em>, <em class="sig-param"><span class="n">process_syn_dir</span></em>, <em class="sig-param"><span class="n">window_process_dir</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/inversion_dicts.html#create_full_inversion_dict_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.inversion_dicts.create_full_inversion_dict_list" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmt_file_db</strong> (<em>str</em>) – the cmtsolution file in the database.</p></li>
<li><p><strong>process_obs_dir</strong> – directory with the process parameter files for
the observed data</p></li>
<li><p><strong>process_syn_dir</strong> (<em>str</em>) – directory with the process parameter files for
the synthetic data</p></li>
<li><p><strong>window_process_dir</strong> (<em>str</em>) – path to the process directory</p></li>
<li><p><strong>npar</strong> (<em>int</em>) – Number of parameters to invert for</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – if True verbose output</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of full inversion dictionaries</p>
</dd>
</dl>
<p>The inversion dictionaries contain all necessary info to start the
inversion. Each Inversion dictionary has then a respective band (and
possible wavetype).</p>
<p><strong>Dictionary structure:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">Window_file</span><span class="p">:</span> <span class="s">&quot;path/to/window/file&quot;</span>
<span class="nt">ASDF_dict</span><span class="p">:</span>

    <span class="nt">Mrr</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_rr.h5&quot;</span>
    <span class="nt">Mtt</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_tt.h5&quot;</span>
    <span class="nt">Mpp</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_pp.h5&quot;</span>
    <span class="nt">Mrt</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_rt.h5&quot;</span>
    <span class="nt">Mrp</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_rp.h5&quot;</span>
    <span class="nt">Mtp</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_tp.h5&quot;</span>
    <span class="nt">dep</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_dep.h5&quot;</span>
    <span class="nt">lon</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_lon.h5&quot;</span>
    <span class="nt">lat</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_lat.h5&quot;</span>
    <span class="nt">ctm</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_ctm.h5&quot;</span>
    <span class="nt">hdr</span><span class="p">:</span> <span class="s">&quot;path/to/CMT_hdr.h5&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.inversion_dicts.create_g3d_inversion_dict_list">
<code class="sig-prename descclassname">gcmt3d.data.management.inversion_dicts.</code><code class="sig-name descname">create_g3d_inversion_dict_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmt_file_db</span></em>, <em class="sig-param"><span class="n">process_obs_dir</span></em>, <em class="sig-param"><span class="n">process_syn_dir</span></em>, <em class="sig-param"><span class="n">window_process_dir</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/inversion_dicts.html#create_g3d_inversion_dict_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.inversion_dicts.create_g3d_inversion_dict_list" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmt_file_db</strong> (<em>str</em>) – the cmtsolution file in the database.</p></li>
<li><p><strong>process_obs_dir</strong> – directory with the process parameter files for
the observed data</p></li>
<li><p><strong>process_syn_dir</strong> (<em>str</em>) – directory with the process parameter files for
the synthetic data</p></li>
<li><p><strong>window_process_dir</strong> (<em>str</em>) – path to the process directory</p></li>
<li><p><strong>npar</strong> (<em>int</em>) – Number of parameters to invert for</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – if True verbose output</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of full inversion dictionaries</p>
</dd>
</dl>
<p>The inversion dictionaries contain all necessary info to start the
inversion. Each Inversion dictionary has then a respective band (and
possible wavetype).</p>
<p><strong>Dictionary structure:</strong>
.. code-block:: yaml</p>
<blockquote>
<div><p>Window_file: “path/to/window/file”
ASDF_dict:</p>
<blockquote>
<div><p>Mrr: “path/to/observed.h5”
Mtt: “path/to/synthetic.h5”</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.inversion_dicts.create_inversion_dict">
<code class="sig-prename descclassname">gcmt3d.data.management.inversion_dicts.</code><code class="sig-name descname">create_inversion_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">processed_dir</span></em>, <em class="sig-param"><span class="n">bandstring</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/inversion_dicts.html#create_inversion_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.inversion_dicts.create_inversion_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a dictionary with all files necessary simulation files for
the inversion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>npar</strong> – Number of parameters to be inverted.</p></li>
<li><p><strong>processed_dir</strong> – directory with the processed data.</p></li>
<li><p><strong>bandstring</strong> – string that is contained in the file name and checks
for the bandpass filtering.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with data files</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.data.management.inversion_dicts.write_inversion_dicts">
<code class="sig-prename descclassname">gcmt3d.data.management.inversion_dicts.</code><code class="sig-name descname">write_inversion_dicts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dict_list</span></em>, <em class="sig-param"><span class="n">filename_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/data/management/inversion_dicts.html#write_inversion_dicts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.data.management.inversion_dicts.write_inversion_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes inversion dictionaries to the given output directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dict_list</strong> – List of inversion dictionaries</p></li>
<li><p><strong>filename_list</strong> – list of paths in string format corresponding to
writing location of the dictionaries in the list</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-gcmt3d.runSF3D.runSF3D">
<span id="run-specfem"></span><h2>Run Specfem<a class="headerlink" href="#module-gcmt3d.runSF3D.runSF3D" title="Permalink to this headline">¶</a></h2>
<p>This file contains the class to run specfem for the database.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>)</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU General Public License, Version 3
(<a class="reference external" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>)</p>
</dd>
</dl>
<p>Last Update: May 2019</p>
<dl class="py class">
<dt id="gcmt3d.runSF3D.runSF3D.DATAFixer">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.runSF3D.runSF3D.</code><code class="sig-name descname">DATAFixer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">specfemdir</span></em>, <em class="sig-param"><span class="n">nodes</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">tasks</span><span class="o">=</span><span class="default_value">24</span></em>, <em class="sig-param"><span class="n">tasks_per_node</span><span class="o">=</span><span class="default_value">24</span></em>, <em class="sig-param"><span class="n">memory_req</span><span class="o">=</span><span class="default_value">40000</span></em>, <em class="sig-param"><span class="n">walltime</span><span class="o">=</span><span class="default_value">'00:30:00'</span></em>, <em class="sig-param"><span class="n">walltime_solver</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cc</span><span class="o">=</span><span class="default_value">'icc'</span></em>, <em class="sig-param"><span class="n">cpp</span><span class="o">=</span><span class="default_value">'icpc'</span></em>, <em class="sig-param"><span class="n">mpicc</span><span class="o">=</span><span class="default_value">'mpicc'</span></em>, <em class="sig-param"><span class="n">f90</span><span class="o">=</span><span class="default_value">'ifort'</span></em>, <em class="sig-param"><span class="n">mpif90</span><span class="o">=</span><span class="default_value">'mpifort'</span></em>, <em class="sig-param"><span class="n">modules</span><span class="o">=</span><span class="default_value">['intel', 'openmpi']</span></em>, <em class="sig-param"><span class="n">gpu_module</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">gpu_version</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">NEX_XI</span><span class="o">=</span><span class="default_value">128</span></em>, <em class="sig-param"><span class="n">NEX_ETA</span><span class="o">=</span><span class="default_value">128</span></em>, <em class="sig-param"><span class="n">NPROC_XI</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">NPROC_ETA</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">GPU_MODE</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">GPU_RUNTIME</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">GPU_PLATFORM</span><span class="o">=</span><span class="default_value">'NVIDIA'</span></em>, <em class="sig-param"><span class="n">GPU_DEVICE</span><span class="o">=</span><span class="default_value">'Tesla'</span></em>, <em class="sig-param"><span class="n">ADIOS_ENABLED</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ADIOS_FOR_FORWARD_ARRAYS</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ADIOS_FOR_MPI_ARRAYS</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ADIOS_FOR_ARRAYS_SOLVER</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ADIOS_FOR_SOLVER_MESHFILES</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ADIOS_FOR_AVS_DX</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ADIOS_FOR_KERNELS</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ADIOS_FOR_MODELS</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ADIOS_FOR_UNDO_ATTENUATION</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ROTATE_SEISMOGRAMS_RT</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">RECORD_LENGTH</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">MODEL</span><span class="o">=</span><span class="default_value">'s40rts'</span></em>, <em class="sig-param"><span class="n">WRITE_SEISMOGRAMS_BY_MASTER</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">OUTPUT_SEISMOS_ASCII_TEXT</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">OUTPUT_SEISMOS_SAC_ALPHANUM</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">OUTPUT_SEISMOS_SAC_BINARY</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">OUTPUT_SEISMOS_ASDF</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">MOVIE_SURFACE</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">MOVIE_VOLUME</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">MOVIE_COARSE</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#DATAFixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.DATAFixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Not necessary but it handles the fixing of the parfile</p>
<dl class="py method">
<dt id="gcmt3d.runSF3D.runSF3D.DATAFixer.configure_and_make">
<code class="sig-name descname">configure_and_make</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#DATAFixer.configure_and_make"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.DATAFixer.configure_and_make" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures specfem and runs ‘make all’ in the specfemdirectory.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.runSF3D.runSF3D.DATAFixer.fix_parfiles">
<code class="sig-name descname">fix_parfiles</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#DATAFixer.fix_parfiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.DATAFixer.fix_parfiles" title="Permalink to this definition">¶</a></dt>
<dd><p>This function changes the number of nodes within the parfile
in each subdirectory of the CMT_SIMs directory.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.runSF3D.runSF3D.DATAFixer.get_val">
<em class="property">static </em><code class="sig-name descname">get_val</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">var</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#DATAFixer.get_val"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.DATAFixer.get_val" title="Permalink to this definition">¶</a></dt>
<dd><p>Function searches file for variable and returns that value as a
string.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>filename: string
var: string</p>
</dd>
<dt>Returns:</dt><dd><p>val</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.runSF3D.runSF3D.DATAFixer.replace_varval">
<em class="property">static </em><code class="sig-name descname">replace_varval</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">newval</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#DATAFixer.replace_varval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.DATAFixer.replace_varval" title="Permalink to this definition">¶</a></dt>
<dd><p>This function updates the value of a function within a text file</p>
<dl class="simple">
<dt>!Note! That this file is customized to change the specfem <cite>Par_file</cite>,</dt><dd><p>Meaning, if newval is <cite>True</cite> or <cite>False</cite> it will be replaced with
<cite>.true.</cite> or <cite>.false</cite> respectively.</p>
</dd>
<dt>Args:</dt><dd><p>var: variable name – string
newval: new variable value, string, number or list</p>
</dd>
</dl>
<p>Throws and error if variable doesnt exist or has multiple definitions.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.runSF3D.runSF3D.DATAFixer.run_mesher">
<code class="sig-name descname">run_mesher</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#DATAFixer.run_mesher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.DATAFixer.run_mesher" title="Permalink to this definition">¶</a></dt>
<dd><p>This function runs the mesher after</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.runSF3D.runSF3D.DATAFixer.run_solver">
<code class="sig-name descname">run_solver</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#DATAFixer.run_solver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.DATAFixer.run_solver" title="Permalink to this definition">¶</a></dt>
<dd><p>This function runs the solver within the</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="gcmt3d.runSF3D.runSF3D.RunSimulation">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.runSF3D.runSF3D.</code><code class="sig-name descname">RunSimulation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">earthquake_dir</span></em>, <em class="sig-param"><span class="n">N</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">npn</span><span class="o">=</span><span class="default_value">24</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">24</span></em>, <em class="sig-param"><span class="n">memory_req</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">npar</span><span class="o">=</span><span class="default_value">9</span></em>, <em class="sig-param"><span class="n">walltime</span><span class="o">=</span><span class="default_value">'00:30:00'</span></em>, <em class="sig-param"><span class="n">modules</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">gpu_module</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">GPU_MODE</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#RunSimulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.RunSimulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class handles the running of specfem after its directory has been
added to the database.</p>
<dl class="py method">
<dt id="gcmt3d.runSF3D.runSF3D.RunSimulation.clean_up">
<code class="sig-name descname">clean_up</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#RunSimulation.clean_up"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.RunSimulation.clean_up" title="Permalink to this definition">¶</a></dt>
<dd><p>This function cleans out the simulation directory, getting rid of
unnecessary MPI and database files. The parameter files are first
copied to the directory OUTPUT_FILES and then <cite>bin</cite>, <cite>DATA</cite> and
<cite>DATABASES_MPI</cite> are deleted since they are irrelevant for future
reproducibility.</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.runSF3D.runSF3D.RunSimulation.replace_STATIONS">
<code class="sig-name descname">replace_STATIONS</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">statfile</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/runSF3D/runSF3D.html#RunSimulation.replace_STATIONS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.runSF3D.runSF3D.RunSimulation.replace_STATIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>This function handles the replacement of the STATION file in the
database directory.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="signal-processing">
<h2>Signal Processing<a class="headerlink" href="#signal-processing" title="Permalink to this headline">¶</a></h2>
<p>This part is also largely taken from pytomo3d, but it has been updated to
Python 3 such that there is support in the future.</p>
<div class="section" id="module-gcmt3d.signal.compare_trace">
<span id="compare-traces"></span><h3>Compare traces<a class="headerlink" href="#module-gcmt3d.signal.compare_trace" title="Permalink to this headline">¶</a></h3>
<p>Functions that compare two traces, return the measurements metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.signal.compare_trace.calculate_misfit">
<code class="sig-prename descclassname">gcmt3d.signal.compare_trace.</code><code class="sig-name descname">calculate_misfit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">_tr1</span></em>, <em class="sig-param"><span class="n">_tr2</span></em>, <em class="sig-param"><span class="n">taper_flag</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">taper_percentage</span><span class="o">=</span><span class="default_value">0.05</span></em>, <em class="sig-param"><span class="n">correlation_flag</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/compare_trace.html#calculate_misfit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.compare_trace.calculate_misfit" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the misfit between two traces
:param tr1: trace 1
:type tr1: Obspy.Trace
:param tr2: trace 2
:type tr2: Obspy.Trace
:param taper_flag: taper the seismogram or not
:type taper_flag: bool
:param taper_percentage: the taper percentage
:type taper_percentage: float</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.compare_trace.cross_correlation">
<code class="sig-prename descclassname">gcmt3d.signal.compare_trace.</code><code class="sig-name descname">cross_correlation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data1</span></em>, <em class="sig-param"><span class="n">data2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/compare_trace.html#cross_correlation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.compare_trace.cross_correlation" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data1</strong> – </p></li>
<li><p><strong>data2</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.compare_trace.least_square_error">
<code class="sig-prename descclassname">gcmt3d.signal.compare_trace.</code><code class="sig-name descname">least_square_error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data1</span></em>, <em class="sig-param"><span class="n">data2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/compare_trace.html#least_square_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.compare_trace.least_square_error" title="Permalink to this definition">¶</a></dt>
<dd><p>waveform difference between data1 and data2
:param data1:
:param data2:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.compare_trace.plot_two_trace">
<code class="sig-prename descclassname">gcmt3d.signal.compare_trace.</code><code class="sig-name descname">plot_two_trace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tr1</span></em>, <em class="sig-param"><span class="n">tr2</span></em>, <em class="sig-param"><span class="n">trace1_tag</span><span class="o">=</span><span class="default_value">'trace 1'</span></em>, <em class="sig-param"><span class="n">trace2_tag</span><span class="o">=</span><span class="default_value">'trace 2'</span></em>, <em class="sig-param"><span class="n">figname</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/compare_trace.html#plot_two_trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.compare_trace.plot_two_trace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.compare_trace.trace_length">
<code class="sig-prename descclassname">gcmt3d.signal.compare_trace.</code><code class="sig-name descname">trace_length</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tr</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/compare_trace.html#trace_length"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.compare_trace.trace_length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-gcmt3d.signal.process">
<span id="function-to-process-streams"></span><h3>Function to process streams<a class="headerlink" href="#module-gcmt3d.signal.process" title="Permalink to this headline">¶</a></h3>
<p>Methods that handles signal data processing for stream(Obspy.Stream)</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.signal.process.check_array_order">
<code class="sig-prename descclassname">gcmt3d.signal.process.</code><code class="sig-name descname">check_array_order</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">array</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">'ascending'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/process.html#check_array_order"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.process.check_array_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a array is in ascending order or descending order
:param array: the input array
:param order: “ascending” or “descending”
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.process.filter_stream">
<code class="sig-prename descclassname">gcmt3d.signal.process.</code><code class="sig-name descname">filter_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">pre_filt</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/process.html#filter_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.process.filter_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter a stream</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> – </p></li>
<li><p><strong>per_filt</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.process.filter_trace">
<code class="sig-prename descclassname">gcmt3d.signal.process.</code><code class="sig-name descname">filter_trace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tr</span></em>, <em class="sig-param"><span class="n">pre_filt</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/process.html#filter_trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.process.filter_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a frequency domain taper mimicing the behavior during the
response removal, without a actual response removal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr</strong> – input trace</p></li>
<li><p><strong>pre_filt</strong> (<em>Numpy.array</em><em> or </em><em>list</em>) – frequency array(Hz) in ascending order, to define
the four corners of filter, for example, [0.01, 0.1, 0.2, 0.5].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>filtered trace</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.process.flex_cut_stream">
<code class="sig-prename descclassname">gcmt3d.signal.process.</code><code class="sig-name descname">flex_cut_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">cut_start</span></em>, <em class="sig-param"><span class="n">cut_end</span></em>, <em class="sig-param"><span class="n">dynamic_npts</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/process.html#flex_cut_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.process.flex_cut_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Flexible cut stream. But checks for the time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> – input stream</p></li>
<li><p><strong>cut_start</strong> – cut starttime</p></li>
<li><p><strong>cut_end</strong> – cut endtime</p></li>
<li><p><strong>dynamic_npts</strong> – the dynamic number of points before cut_start
and after
cut_end</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the cutted stream</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.process.flex_cut_trace">
<code class="sig-prename descclassname">gcmt3d.signal.process.</code><code class="sig-name descname">flex_cut_trace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trace</span></em>, <em class="sig-param"><span class="n">cut_starttime</span></em>, <em class="sig-param"><span class="n">cut_endtime</span></em>, <em class="sig-param"><span class="n">dynamic_npts</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/process.html#flex_cut_trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.process.flex_cut_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>not cut strictly(but also based on the original trace length)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trace</strong> (<em>obspy.Trace</em>) – input trace</p></li>
<li><p><strong>cut_starttime</strong> (<em>obspy.UTCDateTime</em>) – starttime of cutting</p></li>
<li><p><strong>cut_endtime</strong> (<em>obspy.UTCDateTime</em>) – endtime of cutting</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.process.interpolate_stream">
<code class="sig-prename descclassname">gcmt3d.signal.process.</code><code class="sig-name descname">interpolate_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream</span></em>, <em class="sig-param"><span class="n">sampling_rate</span></em>, <em class="sig-param"><span class="n">starttime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">npts</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/process.html#interpolate_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.process.interpolate_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>For a fairly large stream, use stream.interpolate() is not a wise
choice since if there is one trace fails, then the whole interpolation
will stop. So it is better to operate interpolation on the trace
level</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.process.process_stream">
<code class="sig-prename descclassname">gcmt3d.signal.process.</code><code class="sig-name descname">process_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">inventory</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">remove_response_flag</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">water_level</span><span class="o">=</span><span class="default_value">60</span></em>, <em class="sig-param"><span class="n">filter_flag</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">pre_filt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">starttime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">endtime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resample_flag</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">sampling_rate</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">taper_type</span><span class="o">=</span><span class="default_value">'hann'</span></em>, <em class="sig-param"><span class="n">taper_percentage</span><span class="o">=</span><span class="default_value">0.05</span></em>, <em class="sig-param"><span class="n">rotate_flag</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">event_latitude</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">event_longitude</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sanity_check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/process.html#process_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.process.process_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Stream processing function defined for general purpose of tomography.
The advantage of using Stream, rather than than Trace, is that rotation
could be operated if the Stream contains multiple channels. But this
function also deals with Trace, but you need to set rotate_flag to
False</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>obspy.Stream</em>) – input stream</p></li>
<li><p><strong>remove_response_flag</strong> (<em>bool</em>) – flag for remove instrument response. If True,
then inv should be specified, and filter_flag would not be taken caren
of. If you want just filter the seismogram, please leave this to False
and set filter_flag to True.</p></li>
<li><p><strong>inventory</strong> (<em>obspy.Inventory</em>) – station inventory information</p></li>
<li><p><strong>water_level</strong> (<em>float</em>) – water level used in remove instrument response. The
default value in obspy is 60.</p></li>
<li><p><strong>filter_flag</strong> (<em>bool</em>) – flag for filter the seismogram</p></li>
<li><p><strong>pre_filt</strong> (<em>list</em><em>, </em><em>tuple</em><em> or </em><em>numpy.array</em>) – list of tuple of 4 corner frequency for filter,
in ascending order(unit: Hz)</p></li>
<li><p><strong>starttime</strong> (<em>obspy.UTCDateTime</em>) – starttime of cutting</p></li>
<li><p><strong>endtime</strong> (<em>obspy.UTCDateTime</em>) – endtime of cutting</p></li>
<li><p><strong>resample_flag</strong> (<em>bool</em>) – flag for data resampling</p></li>
<li><p><strong>sampling_rate</strong> (<em>float</em>) – resampling rate(unit: Hz)</p></li>
<li><p><strong>taper_type</strong> (<em>str</em>) – taper type, options from obspy taper</p></li>
<li><p><strong>taper_percentage</strong> (<em>float</em>) – percentage of taper</p></li>
<li><p><strong>rotate_flag</strong> – rotate flag. If true, both inv and event location
information should be provided</p></li>
<li><p><strong>event_latitude</strong> (<em>float</em>) – latitude of event, for rotation usage</p></li>
<li><p><strong>event_longitude</strong> (<em>float</em>) – longitude of event, for rotation usage</p></li>
<li><p><strong>sanity_check</strong> (<em>bool</em>) – sanity check the inventory information when
rotating.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>processed stream</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-gcmt3d.signal.rotate">
<span id="rotate-seismograms"></span><h3>Rotate seismograms<a class="headerlink" href="#module-gcmt3d.signal.rotate" title="Permalink to this headline">¶</a></h3>
<p>Methods that handles rotation of seismograms as extension to Obspy.
It can rotate <cite>12</cite>, <cite>EN</cite> and <cite>RT</cite>, forward and backward.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.signal.rotate.calculate_baz">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">calculate_baz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">elat</span></em>, <em class="sig-param"><span class="n">elon</span></em>, <em class="sig-param"><span class="n">slat</span></em>, <em class="sig-param"><span class="n">slon</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#calculate_baz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.calculate_baz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.check_horizontal_inventory_sanity">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">check_horizontal_inventory_sanity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tr1</span></em>, <em class="sig-param"><span class="n">tr2</span></em>, <em class="sig-param"><span class="n">inventory</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#check_horizontal_inventory_sanity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.check_horizontal_inventory_sanity" title="Permalink to this definition">¶</a></dt>
<dd><p>Check two horizontal components and see if their dip is 0
and azimuth is orthogonal to each other.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr1</strong> – </p></li>
<li><p><strong>tr2</strong> – </p></li>
<li><p><strong>inventory</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.check_information_before_rotation">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">check_information_before_rotation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i_1</span></em>, <em class="sig-param"><span class="n">i_2</span></em>, <em class="sig-param"><span class="n">inv</span></em>, <em class="sig-param"><span class="n">sanity_check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#check_information_before_rotation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.check_information_before_rotation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.check_vertical_inventory_sanity">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">check_vertical_inventory_sanity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tr</span></em>, <em class="sig-param"><span class="n">inventory</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#check_vertical_inventory_sanity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.check_vertical_inventory_sanity" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the inventory of vertical(Z) component, check
if the abs(dip) is 90 and azimuth is 0.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.ensemble_synthetic_channel_orientation">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">ensemble_synthetic_channel_orientation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">chan</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#ensemble_synthetic_channel_orientation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.ensemble_synthetic_channel_orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>For synthetic data from SPECFEM, just ensemble the orientation
information.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.extract_channel_orientation">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">extract_channel_orientation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tr</span></em>, <em class="sig-param"><span class="n">inv</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#extract_channel_orientation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.extract_channel_orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the dip and azimuth from inventory, given the trace</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.extract_station_location">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">extract_station_location</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">inventory</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#extract_station_location"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.extract_station_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the station latitude and longitude from inventory, given
stream.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.remove_bad_z_component">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">remove_bad_z_component</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">inventory</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#remove_bad_z_component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.remove_bad_z_component" title="Permalink to this definition">¶</a></dt>
<dd><p>remove Z component if its inventory does not meet requirements</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.rotate_12_rt_func">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">rotate_12_rt_func</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">inv</span></em>, <em class="sig-param"><span class="n">back_azimuth</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'12-&gt;RT'</span></em>, <em class="sig-param"><span class="n">sanity_check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#rotate_12_rt_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.rotate_12_rt_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate horizontal component to RT. This function works generally
for two horizontal and orthogonal components. This function
supports two method:</p>
<ol class="arabic simple">
<li><p>“12-&gt;RT”: which rotates “12” component to “RT”, for example,
“BH1” and “BH2” to “BHR” and “BHT”</p></li>
<li><p>“NE-&gt;RT”: which rotates “NE” component to “RT”, for example,
“BHN” and “BHE” to “BHR” and “BHT”</p></li>
</ol>
<p>The reason why we use our own rotation function is because in obspy
the inventory information is not checked.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> – input stream</p></li>
<li><p><strong>inv</strong> – station inventory information</p></li>
<li><p><strong>method</strong> – rotation method</p></li>
<li><p><strong>back_azimuth</strong> – back azimuth(station to event azimuth)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotated stream</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.rotate_one_station_stream">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">rotate_one_station_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">event_latitude</span></em>, <em class="sig-param"><span class="n">event_longitude</span></em>, <em class="sig-param"><span class="n">station_latitude</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">station_longitude</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">inventory</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'NE-&gt;RT'</span></em>, <em class="sig-param"><span class="n">sanity_check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#rotate_one_station_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.rotate_one_station_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the stream from the same network, station, location and channel
code, for example the stream should only contains traces whose ids are
“II.AAK.00.BH*”</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.rotate_rt_to_ne">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">rotate_rt_to_ne</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">baz</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#rotate_rt_to_ne"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.rotate_rt_to_ne" title="Permalink to this definition">¶</a></dt>
<dd><p>Use obspy rotate function to rotate from RT to NE</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.rotate_stream">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">rotate_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">event_latitude</span></em>, <em class="sig-param"><span class="n">event_longitude</span></em>, <em class="sig-param"><span class="n">inventory</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'ALL-&gt;RT'</span></em>, <em class="sig-param"><span class="n">sanity_check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#rotate_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.rotate_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate a stream to radial and transverse components based on the
station information and event information</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>obspy.Stream</em>) – input stream</p></li>
<li><p><strong>event_latitude</strong> (<em>float</em>) – event latitude</p></li>
<li><p><strong>event_longitude</strong> (<em>float</em>) – event longitude</p></li>
<li><p><strong>inventory</strong> (<em>obspy.Inventory</em>) – station inventory information. If you want to rotate
“12” components, you need to provide inventory since only station
and station_longitude is not enough.</p></li>
<li><p><strong>mode</strong> – <p>rotation mode, could be one of:</p>
<ol class="arabic simple">
<li><p>”NE-&gt;RT”: rotate only North and East channel to RT</p></li>
<li><p>”12-&gt;RT”: rotate only 1 and 2 channel, like “BH1” and “BH2” to RT</p></li>
<li><p>”ALL-&gt;RT”: rotate all components to RT</p></li>
<li><p>”RT-&gt;NE”: rotate RT to NE</p></li>
</ol>
</p></li>
<li><p><strong>sanity_check</strong> – <p>check the sanity of inventory, mianly of the
orientation of ZNE components.</p>
<ol class="arabic simple">
<li><p>If rotating observed data from NE(12)to RT, it is recommended
to set to True; if rotating from RT to NE, then you could set
it to False;
ATTENTION: please turn it to True when processing observed
data since the instrument alignment of observed data might
be messy.</p></li>
<li><p>If rotating synthetic data, you could set it to False since
I assume for synthetic data, there should not be problem
associated with orientation.</p></li>
</ol>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotated stream(obspy.Stream)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.rotate_to_rt">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">rotate_to_rt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">baz</span></em>, <em class="sig-param"><span class="n">inventory</span></em>, <em class="sig-param"><span class="n">mode</span></em>, <em class="sig-param"><span class="n">sanity_check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#rotate_to_rt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.rotate_to_rt" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate horizontal components(12 or NE) to RT directions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> – </p></li>
<li><p><strong>baz</strong> – </p></li>
<li><p><strong>inventory</strong> – </p></li>
<li><p><strong>mode</strong> – </p></li>
<li><p><strong>sanity_check</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate.sort_stream_by_station">
<code class="sig-prename descclassname">gcmt3d.signal.rotate.</code><code class="sig-name descname">sort_stream_by_station</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate.html#sort_stream_by_station"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate.sort_stream_by_station" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the traces in stream. Group the traces from same network,
station, location, and channel code together</p>
</dd></dl>

<span class="target" id="module-gcmt3d.signal.rotate_utils"></span><p>Basic Methods that handles rotation of seismograms as
extension to Obspy. It can rotate <cite>12</cite>, <cite>EN</cite> and <cite>RT</cite>,
forward and backward.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.signal.rotate_utils.check_orthogonality">
<code class="sig-prename descclassname">gcmt3d.signal.rotate_utils.</code><code class="sig-name descname">check_orthogonality</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">azim1</span></em>, <em class="sig-param"><span class="n">azim2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate_utils.html#check_orthogonality"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate_utils.check_orthogonality" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if two azimuth are orthogonal, check whether
(azim1, azim2, vertical) forms a left-hand or right-hand
coordinate system.
Remember the defination of azimuth is angle between north
direction.
Unit is degree, not radian.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate_utils.rotate_12_ne">
<code class="sig-prename descclassname">gcmt3d.signal.rotate_utils.</code><code class="sig-name descname">rotate_12_ne</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d1</span></em>, <em class="sig-param"><span class="n">d2</span></em>, <em class="sig-param"><span class="n">azim1</span></em>, <em class="sig-param"><span class="n">azim2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate_utils.html#rotate_12_ne"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate_utils.rotate_12_ne" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate from any two orthogonal horizontal components to EN components.
The azimuth of the two horizontal components are specified by azim1
and azim2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of one of the two horizontal components</p></li>
<li><p><strong>d2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of the other horizontal components</p></li>
<li><p><strong>azim1</strong> (<em>float</em>) – component azimuth of data1</p></li>
<li><p><strong>azim2</strong> (<em>float</em>) – component azimuth of data2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>East and North component of seismogram.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate_utils.rotate_12_rt">
<code class="sig-prename descclassname">gcmt3d.signal.rotate_utils.</code><code class="sig-name descname">rotate_12_rt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d1</span></em>, <em class="sig-param"><span class="n">d2</span></em>, <em class="sig-param"><span class="n">baz</span></em>, <em class="sig-param"><span class="n">azim1</span></em>, <em class="sig-param"><span class="n">azim2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate_utils.html#rotate_12_rt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate_utils.rotate_12_rt" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate from any two orthogonal horizontal components to RT components</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of one of the two horizontal components</p></li>
<li><p><strong>d2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of the other horizontal components</p></li>
<li><p><strong>baz</strong> (<em>float</em>) – the back azimuth from station to source in degrees</p></li>
<li><p><strong>azim1</strong> (<em>float</em>) – component azimuth of data1</p></li>
<li><p><strong>azim2</strong> (<em>float</em>) – component azimuth of data2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Radial and Transeversal component of seismogram. (None, None)
returned if input two components are not orthogonal</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate_utils.rotate_certain_angle">
<code class="sig-prename descclassname">gcmt3d.signal.rotate_utils.</code><code class="sig-name descname">rotate_certain_angle</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d1</span></em>, <em class="sig-param"><span class="n">d2</span></em>, <em class="sig-param"><span class="n">angle</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'degree'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate_utils.html#rotate_certain_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate_utils.rotate_certain_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic rotating function which rotate d1 and d2 by angle.
d1 and d2 should be orthogonal to each other and form a
‘left-handed’ coordinate system together with vertical
component.</p>
<p>(d1, d2, Vertical) should form a left-handed coordinate system, i.e.,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Azimuth_</span><span class="p">{</span><span class="n">d2</span><span class="p">}</span> <span class="o">=</span> <span class="n">Azimuth_</span><span class="p">{</span><span class="n">d1</span><span class="p">}</span> <span class="o">+</span> <span class="mf">90.0</span> <span class="o">.</span>
</pre></div>
</div>
<p>For example, (North, East, Vertical) &amp; (Radial, Transverse, Vertical)
are both left-handed coordinate systems. The return value (dnew1,
dnew2, vertic) should also form a left-handed coordinate system.
The angle is azimuth differnce between d1 and dnew1, i.e.,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">angle</span> <span class="o">=</span> <span class="n">Azimuth_</span><span class="p">{</span><span class="n">dnew1</span><span class="p">}</span> <span class="o">-</span> <span class="n">Azimuth_</span><span class="p">{</span><span class="n">d1</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of one of the two horizontal components</p></li>
<li><p><strong>d2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of one of the two horizontal components</p></li>
<li><p><strong>angle</strong> (<em>float</em>) – component azimuth of data2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>two new components after rotation</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate_utils.rotate_ne_12">
<code class="sig-prename descclassname">gcmt3d.signal.rotate_utils.</code><code class="sig-name descname">rotate_ne_12</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">e</span></em>, <em class="sig-param"><span class="n">azim1</span></em>, <em class="sig-param"><span class="n">azim2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate_utils.html#rotate_ne_12"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate_utils.rotate_ne_12" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate from East and North components to give two orghogonal horizontal
components. Returned values are (d1, d2) and (d1, d2, Vertical) will
form a left-handed coordinate system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of one of the two horizontal components</p></li>
<li><p><strong>data2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of the other horizontal components</p></li>
<li><p><strong>azim1</strong> (<em>float</em>) – component azimuth of data1</p></li>
<li><p><strong>azim2</strong> (<em>float</em>) – component azimuth of data2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>two horizontal orthogonal seismogram after rotation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.signal.rotate_utils.rotate_rt_12">
<code class="sig-prename descclassname">gcmt3d.signal.rotate_utils.</code><code class="sig-name descname">rotate_rt_12</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">r</span></em>, <em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">baz</span></em>, <em class="sig-param"><span class="n">azim1</span></em>, <em class="sig-param"><span class="n">azim2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/signal/rotate_utils.html#rotate_rt_12"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.signal.rotate_utils.rotate_rt_12" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate from any two orthogonal horizontal components to RT components</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of one of the two horizontal components</p></li>
<li><p><strong>data2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Data of the other horizontal components</p></li>
<li><p><strong>baz</strong> (<em>float</em>) – the back azimuth from station to source in degrees</p></li>
<li><p><strong>azim1</strong> (<em>float</em>) – component azimuth of data1</p></li>
<li><p><strong>azim2</strong> (<em>float</em>) – component azimuth of data2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Radial and Transeversal component of seismogram.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-gcmt3d.utils.download">
<span id="utilities"></span><h2>Utilities<a class="headerlink" href="#module-gcmt3d.utils.download" title="Permalink to this headline">¶</a></h2>
<p>utils for seismic data download</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.utils.download.download_stationxml">
<code class="sig-prename descclassname">gcmt3d.utils.download.</code><code class="sig-name descname">download_stationxml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stations</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">starttime</span><span class="p">:</span> <span class="n">obspy.core.utcdatetime.UTCDateTime</span></em>, <em class="sig-param"><span class="n">endtime</span><span class="p">:</span> <span class="n">obspy.core.utcdatetime.UTCDateTime</span></em>, <em class="sig-param"><span class="n">outputdir</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">client</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">level</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'response'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/download.html#download_stationxml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.download.download_stationxml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.utils.download.download_waveform">
<code class="sig-prename descclassname">gcmt3d.utils.download.</code><code class="sig-name descname">download_waveform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stations</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">starttime</span><span class="p">:</span> <span class="n">obspy.core.utcdatetime.UTCDateTime</span></em>, <em class="sig-param"><span class="n">endtime</span><span class="p">:</span> <span class="n">obspy.core.utcdatetime.UTCDateTime</span></em>, <em class="sig-param"><span class="n">outputdir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">client</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/download.html#download_waveform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.download.download_waveform" title="Permalink to this definition">¶</a></dt>
<dd><p>download wavefrom data from IRIS data center</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stations</strong> – list of stations, should be list of station ids,
for example, “II.AAK.00.BHZ”. Parts could be replaced by “*”,
for example, “II.AAK.*.BH*”</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.utils.download.read_station_file">
<code class="sig-prename descclassname">gcmt3d.utils.download.</code><code class="sig-name descname">read_station_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">station_filename</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/download.html#read_station_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.download.read_station_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<span class="target" id="module-gcmt3d.utils.io"></span><p>Some important and simple IO help functions.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>) Year? pyasdf
Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>) 2019</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU General Public License, Version 3
(<a class="reference external" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.utils.io.check_dict_keys">
<code class="sig-prename descclassname">gcmt3d.utils.io.</code><code class="sig-name descname">check_dict_keys</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dict_to_check</span></em>, <em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/io.html#check_dict_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.io.check_dict_keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.utils.io.dump_json">
<code class="sig-prename descclassname">gcmt3d.utils.io.</code><code class="sig-name descname">dump_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">content</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/io.html#dump_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.io.dump_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.utils.io.is_mpi_env">
<code class="sig-prename descclassname">gcmt3d.utils.io.</code><code class="sig-name descname">is_mpi_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/io.html#is_mpi_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.io.is_mpi_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if current environment is MPI or not</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.utils.io.load_json">
<code class="sig-prename descclassname">gcmt3d.utils.io.</code><code class="sig-name descname">load_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/io.html#load_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.io.load_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.utils.io.read_yaml_file">
<code class="sig-prename descclassname">gcmt3d.utils.io.</code><code class="sig-name descname">read_yaml_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/io.html#read_yaml_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.io.read_yaml_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.utils.io.smart_read_yaml">
<code class="sig-prename descclassname">gcmt3d.utils.io.</code><code class="sig-name descname">smart_read_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">yaml_file</span></em>, <em class="sig-param"><span class="n">mpi_mode</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/io.html#smart_read_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.io.smart_read_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Read yaml file into python dict, in mpi_mode or not</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.utils.io.write_yaml_file">
<code class="sig-prename descclassname">gcmt3d.utils.io.</code><code class="sig-name descname">write_yaml_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/utils/io.html#write_yaml_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.utils.io.write_yaml_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes dictionary to given yaml file.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>d: Dictionary to be written into the yaml file
filename: string with filename of the file to be written.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="windowing-of-traces">
<h2>Windowing of traces<a class="headerlink" href="#windowing-of-traces" title="Permalink to this headline">¶</a></h2>
<p>The following modules are all concerned with the processing of both synthetic
and observed data and their similarities.</p>
<div class="section" id="module-gcmt3d.window.window">
<span id="windowing-of-the-data"></span><h3>Windowing of the data<a class="headerlink" href="#module-gcmt3d.window.window" title="Permalink to this headline">¶</a></h3>
<p>Methods that handles Window selection</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.window.window.plot_window_figure">
<code class="sig-prename descclassname">gcmt3d.window.window.</code><code class="sig-name descname">plot_window_figure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">figure_dir</span></em>, <em class="sig-param"><span class="n">figure_id</span></em>, <em class="sig-param"><span class="n">ws</span></em>, <em class="sig-param"><span class="n">_verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">figure_format</span><span class="o">=</span><span class="default_value">'pdf'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window.html#plot_window_figure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window.plot_window_figure" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot window figure out</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>figure_dir</strong> (<em>str</em>) – output figure directory</p></li>
<li><p><strong>figure_id</strong> (<em>str</em>) – figure id to distinguish windows plots, for
example, trace id could be used, like “II.AAK.00.BHZ”</p></li>
<li><p><strong>ws</strong> (<em>pyflex.WindowSelector</em>) – window selector object from pyflex</p></li>
<li><p><strong>_verbose</strong> (<em>bool</em>) – verbose output flag</p></li>
<li><p><strong>figure_format</strong> (<em>str</em>) – figure format, could be “pdf”, “png” and etc.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window.update_user_levels">
<code class="sig-prename descclassname">gcmt3d.window.window.</code><code class="sig-name descname">update_user_levels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user_module</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">station</span></em>, <em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">obsd</span></em>, <em class="sig-param"><span class="n">synt</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window.html#update_user_levels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window.update_user_levels" title="Permalink to this definition">¶</a></dt>
<dd><p>Update user levels as an array using user_module</p>
<p>This function emulates the user_functions feature in FLEXWIN. User
has to prepare a python module that has a method called
generate_user_levels. This module has to be passed out as a string
(It should be formatted as you would in an import statement). And
then, user_module is dynamically imported and the
generate_user_levels function is called with the following
parameters: pyflex config, obspy station data, obspy event data,
observed and synthetic obspy traces. It is excepted that user to
use given scalar acceptance levels as base values and generate
acceptance level arrays as long as trace data to be given to the
pyflex. Function should return these values in order: stalta water
level, tshift acceptance level, dlna acceptance level,
cc_acceptance_level, s2n_limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_module</strong> (<em>str</em>) – user module as a string</p></li>
<li><p><strong>config</strong> – window selection config</p></li>
<li><p><strong>station</strong> (<em>obspy.Inventory</em><em> or </em><em>pyflex.Station</em>) – station information which provids station location to
calculate the epicenter distance</p></li>
<li><p><strong>event</strong> (<em>pyflex.Event</em><em>, </em><em>obspy.Catalog</em><em> or </em><em>obspy.Event</em>) – event information, providing the event information</p></li>
<li><p><strong>observed</strong> (<em>obspy.Trace</em>) – observed trace</p></li>
<li><p><strong>synthetic</strong> (<em>obspy.Trace</em>) – synthetic trace</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>window selection config with arrays</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyflex.Config</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window.window_on_stream">
<code class="sig-prename descclassname">gcmt3d.window.window.</code><code class="sig-name descname">window_on_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">observed</span></em>, <em class="sig-param"><span class="n">synthetic</span></em>, <em class="sig-param"><span class="n">config_dict</span></em>, <em class="sig-param"><span class="n">station</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">event</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">user_modules</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">figure_mode</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">figure_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">_verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window.html#window_on_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window.window_on_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Window selection on a Stream</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>observed</strong> (<em>obspy.Stream</em>) – observed stream</p></li>
<li><p><strong>synthetic</strong> (<em>obspy.Stream</em>) – synthetic stream</p></li>
<li><p><strong>config_dict</strong> (<em>dict</em>) – window selection config dictionary, for example,
{“Z”: pyflex.Config, “R”: pyflex.Config, “T”: pyflex.Config}</p></li>
<li><p><strong>station</strong> (<em>obspy.Inventory</em><em> or </em><em>pyflex.Station</em>) – station information which provids station location to
calculate the epicenter distance</p></li>
<li><p><strong>event</strong> (<em>pyflex.Event</em><em>, </em><em>obspy.Catalog</em><em> or </em><em>obspy.Event</em>) – event information, providing the event information</p></li>
<li><p><strong>user_modules</strong> (<em>dict</em>) – user_module strings in a dict similar to config_dict.</p></li>
<li><p><strong>figure_mode</strong> (<em>bool</em>) – output figure flag</p></li>
<li><p><strong>figure_dir</strong> (<em>str</em>) – output figure directory</p></li>
<li><p><strong>_verbose</strong> (<em>bool</em>) – verbose flag</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window.window_on_trace">
<code class="sig-prename descclassname">gcmt3d.window.window.</code><code class="sig-name descname">window_on_trace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obs_tr</span></em>, <em class="sig-param"><span class="n">syn_tr</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">station</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">event</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">user_module</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">_verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">figure_mode</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">figure_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">figure_format</span><span class="o">=</span><span class="default_value">'pdf'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window.html#window_on_trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window.window_on_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Window selection on a trace(obspy.Trace)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>observed</strong> (<em>obspy.Trace</em>) – observed trace</p></li>
<li><p><strong>synthetic</strong> (<em>obspy.Trace</em>) – synthetic trace</p></li>
<li><p><strong>config</strong> – window selection config</p></li>
<li><p><strong>station</strong> (<em>obspy.Inventory</em><em> or </em><em>pyflex.Station</em>) – station information which provids station location to
calculate the epicenter distance</p></li>
<li><p><strong>event</strong> (<em>pyflex.Event</em><em>, </em><em>obspy.Catalog</em><em> or </em><em>obspy.Event</em>) – event information, providing the event information</p></li>
<li><p><strong>user_module</strong> (<em>str</em>) – user module as a string</p></li>
<li><p><strong>figure_mode</strong> (<em>bool</em>) – output figure flag</p></li>
<li><p><strong>figure_dir</strong> (<em>str</em>) – output figure directory</p></li>
<li><p><strong>_verbose</strong> (<em>bool</em>) – verbose flag</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-gcmt3d.window.window_weights">
<span id="weighting-the-windows"></span><h3>Weighting the windows<a class="headerlink" href="#module-gcmt3d.window.window_weights" title="Permalink to this headline">¶</a></h3>
<p>Calculate the adjoint source weighting based on the station and source
distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.window.window_weights.assign_receiver_to_points">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">assign_receiver_to_points</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">channels</span></em>, <em class="sig-param"><span class="n">stations</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#assign_receiver_to_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.assign_receiver_to_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the receiver information to SpherePoint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rec_wcounts</strong> – </p></li>
<li><p><strong>stations</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.calculate_category_weights_interface">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">calculate_category_weights_interface</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">category_param</span></em>, <em class="sig-param"><span class="n">cat_wcounts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#calculate_category_weights_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.calculate_category_weights_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>User interface(API) for calculating category weights</p>
<p>Calculate the category weighting based on window counts
in each category. The weighting ratios for different categoies
are input parameters. So this function only normlizes
the weights without change the ratio.
!!! WARNING !!!
It is the ratio between different categories, not the window
counts. For example, the value will be mostly likely to be
set to 1/N_w(for windows, less weights to balance categories)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weight_param</strong> (<em>dict</em>) – user parameter, which contains the weighting
ratio for each category.</p></li>
<li><p><strong>cat_wcounts</strong> (<em>dict</em>) – category window counts, which should contains
the same period band as category_param[‘ratio’]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.calculate_receiver_weights_interface">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">calculate_receiver_weights_interface</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src_info</span></em>, <em class="sig-param"><span class="n">path_info</span></em>, <em class="sig-param"><span class="n">weighting_param</span></em>, <em class="sig-param"><span class="n">_verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#calculate_receiver_weights_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.calculate_receiver_weights_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>The user interface(API) for calculation the receiver weighting
in pypaw</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_info</strong> (<em>dict</em>) – keys contains [“latitude”, “longitude”]</p></li>
<li><p><strong>path_info</strong> (<em>dict</em>) – keys contains [“station_file”, “window_file”,
“output_file”]</p></li>
<li><p><strong>weighting_param</strong> (<em>dict</em>) – keys contains [“flag”, “plot”, “search_ratio”]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.calculate_receiver_window_counts">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">calculate_receiver_window_counts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#calculate_receiver_window_counts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.calculate_receiver_window_counts" title="Permalink to this definition">¶</a></dt>
<dd><p>Given windows, count them based on receiver level and category
(component) level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>windows</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.check_category_ratio_consistency">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">check_category_ratio_consistency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cat_weight_ratio</span></em>, <em class="sig-param"><span class="n">cat_wcounts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#check_category_ratio_consistency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.check_category_ratio_consistency" title="Permalink to this definition">¶</a></dt>
<dd><p>check the category weighting ratio(provide by user) has
the same period band and component as in read seismic
data.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.combine_receiver_and_category_weights">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">combine_receiver_and_category_weights</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rec_weights</span></em>, <em class="sig-param"><span class="n">cat_weights</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#combine_receiver_and_category_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.combine_receiver_and_category_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine weights for receiver weighting and category weighting</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.determine_receiver_weighting">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">determine_receiver_weighting</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">stations</span></em>, <em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">search_ratio</span><span class="o">=</span><span class="default_value">0.35</span></em>, <em class="sig-param"><span class="n">weight_flag</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_flag</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">figname_prefix</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#determine_receiver_weighting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.determine_receiver_weighting" title="Permalink to this definition">¶</a></dt>
<dd><p>Given one station and window information, determine the receiver
weighting
In one asdf file, there are still 3 components, for example,
[“BHR”, “BHT”, “BHZ”]. These three components should be treated
indepandently and weights will be calculated independantly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict of weights which contains 3 components. Each components
contains weights values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.get_receiver_weights">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">get_receiver_weights</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">component</span></em>, <em class="sig-param"><span class="n">center</span></em>, <em class="sig-param"><span class="n">points</span></em>, <em class="sig-param"><span class="n">max_ratio</span></em>, <em class="sig-param"><span class="n">plot</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">figname_prefix</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#get_receiver_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.get_receiver_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the receiver weights given receiver(points) distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component</strong> – </p></li>
<li><p><strong>center</strong> – </p></li>
<li><p><strong>points</strong> – </p></li>
<li><p><strong>max_ratio</strong> – </p></li>
<li><p><strong>plot</strong> – </p></li>
<li><p><strong>figname_prefix</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.normalize_category_weights">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">normalize_category_weights</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">category_ratio</span></em>, <em class="sig-param"><span class="n">cat_wcounts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#normalize_category_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.normalize_category_weights" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.window_weights.normalize_receiver_weights">
<code class="sig-prename descclassname">gcmt3d.window.window_weights.</code><code class="sig-name descname">normalize_receiver_weights</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">points</span></em>, <em class="sig-param"><span class="n">wcounts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/window_weights.html#normalize_receiver_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.window_weights.normalize_receiver_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the receiver weights</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>points</strong> – </p></li>
<li><p><strong>rec_wcounts</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-gcmt3d.window.filter_windows">
<span id="filtering-the-windows"></span><h3>Filtering the windows<a class="headerlink" href="#module-gcmt3d.window.filter_windows" title="Permalink to this headline">¶</a></h3>
<p>Filter the window based on the sensor type. For example, in long
period band(90-250s), we want to keep only STS-1 instrument windows.
For the input file, it requires 1) sensor type as json file; 2) windows
as json file. For the output, it is going to replace the origin window file
and keep a copy of original windows as “<code class="docutils literal notranslate"><span class="pre">***</span></code>.origin.json”</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py function">
<dt id="gcmt3d.window.filter_windows.check_consistency">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">check_consistency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">measurements</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#check_consistency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.check_consistency" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.count_windows">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">count_windows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#count_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.count_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of channels and windows
:param windows:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.filter_measurements_on_bounds">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">filter_measurements_on_bounds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">measurements</span></em>, <em class="sig-param"><span class="n">bounds</span></em>, <em class="sig-param"><span class="n">comp_keep_flag</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#filter_measurements_on_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.filter_measurements_on_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>filter the windows based on its measurements</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.filter_windows">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">filter_windows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">stations</span></em>, <em class="sig-param"><span class="n">measurements</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#filter_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.filter_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter windows based on measurements and station information</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.filter_windows_on_measurements">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">filter_windows_on_measurements</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">measurements</span></em>, <em class="sig-param"><span class="n">measure_config</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#filter_windows_on_measurements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.filter_windows_on_measurements" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter windows based on measurements and threshold specified by
the user.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.filter_windows_on_sensors">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">filter_windows_on_sensors</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">stations</span></em>, <em class="sig-param"><span class="n">sensor_types</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#filter_windows_on_sensors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.filter_windows_on_sensors" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the windows based on sensor types and station information.
Only sensor types in ‘sensor_types’ will be kept.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.get_component_keep_flag">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">get_component_keep_flag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt_means</span></em>, <em class="sig-param"><span class="n">dt_stds</span></em>, <em class="sig-param"><span class="n">dlna_means</span></em>, <em class="sig-param"><span class="n">dlna_stds</span></em>, <em class="sig-param"><span class="n">comp_config</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#get_component_keep_flag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.get_component_keep_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the mean and std of dt and dlna are within the range
provided by the user. The default values are true. If the user
doesn’t provide any parameters, then all values will be kept
as true</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.get_measurement_final_bounds">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">get_measurement_final_bounds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">comp_config</span></em>, <em class="sig-param"><span class="n">dt_means</span></em>, <em class="sig-param"><span class="n">dt_stds</span></em>, <em class="sig-param"><span class="n">dlna_means</span></em>, <em class="sig-param"><span class="n">dlna_stds</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#get_measurement_final_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.get_measurement_final_bounds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.get_measurements_std">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">get_measurements_std</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">measurements</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#get_measurements_std"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.get_measurements_std" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the mean and standard deviation values from the measurements</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.get_std_bound">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">get_std_bound</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mean</span></em>, <em class="sig-param"><span class="n">std</span></em>, <em class="sig-param"><span class="n">std_ratio</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#get_std_bound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.get_std_bound" title="Permalink to this definition">¶</a></dt>
<dd><p>bound from mean and std values from measurements</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.get_user_bound">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">get_user_bound</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#get_user_bound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.get_user_bound" title="Permalink to this definition">¶</a></dt>
<dd><p>user specified bound for measurements filter</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.is_right_sensor">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">is_right_sensor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sensor</span></em>, <em class="sig-param"><span class="n">sensor_types</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#is_right_sensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.is_right_sensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if sensor in the list of sensor_types</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.filter_windows.print_window_filter_summary">
<code class="sig-prename descclassname">gcmt3d.window.filter_windows.</code><code class="sig-name descname">print_window_filter_summary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">old_windows</span></em>, <em class="sig-param"><span class="n">new_windows</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/filter_windows.html#print_window_filter_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.filter_windows.print_window_filter_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="id1">
<h3>Utilities<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-gcmt3d.window.utils"></span><p># functions mainly for pypaw.</p>
<dl class="py function">
<dt id="gcmt3d.window.utils.convert_to_window_json_to_txt">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">convert_to_window_json_to_txt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windowjson</span></em>, <em class="sig-param"><span class="n">outputtxt</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#convert_to_window_json_to_txt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.convert_to_window_json_to_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts window</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>windowjson</strong> – </p></li>
<li><p><strong>outputtxt</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.generate_log_content">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">generate_log_content</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#generate_log_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.generate_log_content" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.merge_channels_window">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">merge_channels_window</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sta_win</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#merge_channels_window"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.merge_channels_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge windows from different channels.
This step should be done after merge instruments windows
because after that there will only one instrument left
on one channel.
For example, if we have “BH” channel with 20 windows and
“LH” has 10 windows, we will keep only the “BH” channel.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.merge_instruments_window">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">merge_instruments_window</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sta_win</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#merge_instruments_window"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.merge_instruments_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge windows from the same channel, for example, if
there are windows from “00.BH*” and “10.BH*”, keep only one
with the most windows. For example, if “00.BH*” has 10
windows and “10.BH*” has 20 windows, we will keep the
“10.BH*” since it has more windows.</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.merge_station_windows">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">merge_station_windows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#merge_station_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.merge_station_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge windows for one station.
For example, you may have “00.BH”, “10.BH”, “00.LH”, “10.LH” from
different locations and channels. You may only want to keep one
at the very end. So:</p>
<ol class="arabic simple">
<li><p>select locations: keep only one location with the most
number of windows for one channel. For example, in “00.BH” and
“10.BH” we only keep “10.BH”.</p></li>
<li><p>select channel: after last step, we keep only “00.BH” and “10.LH”,
but ultimately we only want to keep one. So we may only choose
“00.BH” since it has more windows.</p></li>
</ol>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.merge_windows">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">merge_windows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#merge_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.merge_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge the windows(from one event, multiple stations)</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.pick_channel_with_more_windows">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">pick_channel_with_more_windows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sort_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#pick_channel_with_more_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.pick_channel_with_more_windows" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.pick_location_with_more_windows">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">pick_location_with_more_windows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sort_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#pick_location_with_more_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.pick_location_with_more_windows" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.sort_windows_on_channel">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">sort_windows_on_channel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sta_win</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#sort_windows_on_channel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.sort_windows_on_channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Group windows from one station into channels and count
the number of windows in that channel
:param sta_win:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.sort_windows_on_channel_and_location">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">sort_windows_on_channel_and_location</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sta_win</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#sort_windows_on_channel_and_location"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.sort_windows_on_channel_and_location" title="Permalink to this definition">¶</a></dt>
<dd><p>functions for merge_instruments_window. the windows
will be sorted based on [chan][location]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sta_win</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.utils.stats_all_windows">
<code class="sig-prename descclassname">gcmt3d.window.utils.</code><code class="sig-name descname">stats_all_windows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">obsd_tag</span></em>, <em class="sig-param"><span class="n">synt_tag</span></em>, <em class="sig-param"><span class="n">instrument_merge_flag</span></em>, <em class="sig-param"><span class="n">output_file</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/utils.html#stats_all_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.utils.stats_all_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate window statistic information</p>
</dd></dl>

<span class="target" id="module-gcmt3d.window.io"></span><p>Methods that handles writing windows</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, version 3 (LGPLv3)
(<a class="reference external" href="http://www.gnu.org/licenses/lgpl-3.0.en.html">http://www.gnu.org/licenses/lgpl-3.0.en.html</a>)</p>
</dd>
</dl>
<dl class="py class">
<dt id="gcmt3d.window.io.WindowEncoder">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.window.io.</code><code class="sig-name descname">WindowEncoder</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">skipkeys</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ensure_ascii</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">check_circular</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">allow_nan</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">sort_keys</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">indent</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">separators</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/io.html#WindowEncoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.io.WindowEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">json.encoder.JSONEncoder</span></code></p>
<dl class="py method">
<dt id="gcmt3d.window.io.WindowEncoder.default">
<code class="sig-name descname">default</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/io.html#WindowEncoder.default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.io.WindowEncoder.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement this method in a subclass such that it returns
a serializable object for <code class="docutils literal notranslate"><span class="pre">o</span></code>, or calls the base implementation
(to raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>).</p>
<p>For example, to support arbitrary iterators, you could
implement default like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="c1"># Let the base class default method raise the TypeError</span>
    <span class="k">return</span> <span class="n">JSONEncoder</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.io.get_json_content">
<code class="sig-prename descclassname">gcmt3d.window.io.</code><code class="sig-name descname">get_json_content</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">window</span></em>, <em class="sig-param"><span class="n">simple_mode</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/io.html#get_json_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.io.get_json_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract information from json to a dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>window</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.io.load_window_config_yaml">
<code class="sig-prename descclassname">gcmt3d.window.io.</code><code class="sig-name descname">load_window_config_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/io.html#load_window_config_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.io.load_window_config_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Load yaml and setup pyflex.Config object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.io.write_jsonfile">
<code class="sig-prename descclassname">gcmt3d.window.io.</code><code class="sig-name descname">write_jsonfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/io.html#write_jsonfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.io.write_jsonfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Write windows to a json file. Also, this requires windows to be
type of list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>windows</strong> – list of windows</p></li>
<li><p><strong>filename</strong> – output filename</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gcmt3d.window.io.write_txtfile">
<code class="sig-prename descclassname">gcmt3d.window.io.</code><code class="sig-name descname">write_txtfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">windows</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/window/io.html#write_txtfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.window.io.write_txtfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Write windows to text file, for a list of windows. Notice that
this method only works on LISTS of windows, for example,
windows on a pair of traces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>windows</strong> (<em>list</em>) – list of windows(from same observed and synthetic)</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – output filename</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-gcmt3d.source">
<span id="source-class"></span><h2>Source <code class="docutils literal notranslate"><span class="pre">class</span></code><a class="headerlink" href="#module-gcmt3d.source" title="Permalink to this headline">¶</a></h2>
<p>Source and Receiver classes of Instaseis.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Lion Krischer (<a class="reference external" href="mailto:krischer&#37;&#52;&#48;geophysik&#46;uni-muenchen&#46;de">krischer<span>&#64;</span>geophysik<span>&#46;</span>uni-muenchen<span>&#46;</span>de</a>), 2014
Martin van Driel (<a class="reference external" href="mailto:Martin&#37;&#52;&#48;vanDriel&#46;de">Martin<span>&#64;</span>vanDriel<span>&#46;</span>de</a>), 2014
Wenjie Lei (<a class="reference external" href="mailto:lei&#37;&#52;&#48;princeton&#46;edu">lei<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2016
Lucas Sawade (<a class="reference external" href="mailto:lsawade&#37;&#52;&#48;princeton&#46;edu">lsawade<span>&#64;</span>princeton<span>&#46;</span>edu</a>), 2019</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="http://www.gnu.org/copyleft/lgpl.html">http://www.gnu.org/copyleft/lgpl.html</a>)</p>
</dd>
</dl>
<dl class="py class">
<dt id="gcmt3d.source.CMTSource">
<em class="property">class </em><code class="sig-prename descclassname">gcmt3d.source.</code><code class="sig-name descname">CMTSource</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">origin_time</span><span class="o">=</span><span class="default_value">UTCDateTime(1970, 1, 1, 0, 0)</span></em>, <em class="sig-param"><span class="n">pde_latitude</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">pde_longitude</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">mb</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">ms</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">pde_depth_in_m</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">region_tag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eventname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cmt_time</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">half_duration</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">latitude</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">longitude</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">depth_in_m</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">m_rr</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">m_tt</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">m_pp</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">m_rt</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">m_rp</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">m_tp</span><span class="o">=</span><span class="default_value">0.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/source.html#CMTSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.source.CMTSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to handle a seismic moment tensor source including a source time
function.</p>
<dl class="py method">
<dt id="gcmt3d.source.CMTSource.M0">
<em class="property">property </em><code class="sig-name descname">M0</code><a class="headerlink" href="#gcmt3d.source.CMTSource.M0" title="Permalink to this definition">¶</a></dt>
<dd><p>Scalar Moment M0 in Nm</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.source.CMTSource.from_CMTSOLUTION_file">
<em class="property">classmethod </em><code class="sig-name descname">from_CMTSOLUTION_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/source.html#CMTSource.from_CMTSOLUTION_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.source.CMTSource.from_CMTSOLUTION_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a source object from a CMTSOLUTION file.
:param filename: path to the CMTSOLUTION file</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.source.CMTSource.from_quakeml_file">
<em class="property">classmethod </em><code class="sig-name descname">from_quakeml_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/source.html#CMTSource.from_quakeml_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.source.CMTSource.from_quakeml_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialiaze a source object from a quakeml file
:param filename: path to a quakeml file</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.source.CMTSource.moment_magnitude">
<em class="property">property </em><code class="sig-name descname">moment_magnitude</code><a class="headerlink" href="#gcmt3d.source.CMTSource.moment_magnitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Moment magnitude M_w</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.source.CMTSource.tensor">
<em class="property">property </em><code class="sig-name descname">tensor</code><a class="headerlink" href="#gcmt3d.source.CMTSource.tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>List of moment tensor components in r, theta, phi coordinates:
[m_rr, m_tt, m_pp, m_rt, m_rp, m_tp]</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.source.CMTSource.time_shift">
<em class="property">property </em><code class="sig-name descname">time_shift</code><a class="headerlink" href="#gcmt3d.source.CMTSource.time_shift" title="Permalink to this definition">¶</a></dt>
<dd><p>Time shift between cmtsolution and pdesolution</p>
</dd></dl>

<dl class="py method">
<dt id="gcmt3d.source.CMTSource.write_CMTSOLUTION_file">
<code class="sig-name descname">write_CMTSOLUTION_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gcmt3d/source.html#CMTSource.write_CMTSOLUTION_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gcmt3d.source.CMTSource.write_CMTSOLUTION_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a source object from a CMTSOLUTION file.
:param filename: path to the CMTSOLUTION file</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="workflowAPI.html" class="btn btn-neutral float-right" title="EnTK Workflow API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hdf5_and_h5py.html" class="btn btn-neutral float-left" title="Installation of hdf5 and h5py" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Lucas Sawade

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>